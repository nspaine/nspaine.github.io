<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/cpu.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#050505" />
  <meta name="color-scheme" content="dark" />

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://nspaine.github.io/" />
  <meta property="og:title" content="Portfolio | Nigel Paine" />
  <meta property="og:description"
    content="Interactive portfolio featuring circuitry simulations, architecture gallery, and software projects." />
  <meta property="og:image" content="https://nspaine.github.io/images/project_images/thermal-flow-model.webp" />

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image" />
  <meta property="twitter:url" content="https://nspaine.github.io/" />
  <meta property="twitter:title" content="Portfolio | Nigel Paine" />
  <meta property="twitter:description"
    content="Interactive portfolio featuring circuitry simulations, architecture gallery, and software projects." />
  <meta property="twitter:image" content="https://nspaine.github.io/images/project_images/thermal-flow-model.webp" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&display=block" rel="stylesheet">
  <style>
    body {
      margin: 0;
      padding: 0;
      background-color: #050505;
      overflow: hidden;
    }

    @keyframes scopeScroll {
      0% {
        transform: translate3d(0, 0, 0);
      }

      100% {
        transform: translate3d(-300px, 0, 0);
      }
    }

    .scope-wave {
      animation: scopeScroll 2s linear infinite;
      will-change: transform;
      backface-visibility: hidden;
    }

    .scope-wave-delayed {
      animation: scopeScroll 2s linear infinite;
      animation-delay: -0.5s;
      will-change: transform;
      backface-visibility: hidden;
    }
  </style>
  <script type="module" crossorigin src="/assets/index-BSo1ZiTe.js"></script>
  <link rel="modulepreload" crossorigin href="/assets/vendor-react-6ah5gmXX.js">
  <link rel="modulepreload" crossorigin href="/assets/vendor-framer-SwFvxf7O.js">
  <link rel="modulepreload" crossorigin href="/assets/vendor-icons-BNdOiyyC.js">
  <link rel="stylesheet" crossorigin href="/assets/index-D1WRkm4Q.css">
</head>

<body>
  <!-- Clear visited pages on hard refresh -->
  <script>sessionStorage.removeItem('visitedPages');</script>

  <!-- Critical Loading Screen (Outside #root to survive hydration) -->

  <div id="initial-loader"
    style="position: fixed; inset: 0; background-color: #050505; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 1.5rem; z-index: 99999; transition: opacity 0.5s ease-out;">

    <!-- Preload profile image while loader is showing -->
    <img src="/profile-pixel.webp" alt="" style="display: none;" />

    <!-- Home Loader Content - Binary Grid -->
    <div id="loader-home"
      style="display: none; flex-direction: column; align-items: center; justify-content: center; gap: 2rem; padding: 0 1rem;">

      <!-- 10x10 Binary Grid -->
      <div id="binary-grid"
        style="display: grid; grid-template-columns: repeat(10, 1fr); gap: clamp(0.375rem, 1vw, 0.75rem);"></div>

      <p
        style="color: #FFD700; font-size: 0.875rem; letter-spacing: 0.3em; font-family: 'Orbitron', monospace; font-weight: 700; text-transform: uppercase; margin: 0; animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;">
        DOWNLOADING BYTES...
      </p>

      <script>
        (function () {
          const grid = document.getElementById('binary-grid');
          if (!grid) return;

          const cells = [];

          // Create 10x10 grid
          for (let i = 0; i < 100; i++) {
            const cell = document.createElement('div');
            cell.textContent = Math.random() > 0.5 ? '1' : '0';
            cell.style.cssText = 'color: #FFD700; font-size: clamp(1.25rem, 1.5vw, 1.875rem); font-family: Orbitron, monospace; font-weight: bold; text-align: center; min-width: 1em;';
            grid.appendChild(cell);
            cells.push(cell);
          }

          // Animate cells
          setInterval(function () {
            const numFlips = Math.floor(Math.random() * 3) + 1;
            for (let i = 0; i < numFlips; i++) {
              const idx = Math.floor(Math.random() * cells.length);
              const cell = cells[idx];
              cell.textContent = cell.textContent === '0' ? '1' : '0';
              cell.style.opacity = '0.5';
              setTimeout(function () { cell.style.opacity = '1'; }, 50);
            }
          }, 100);
        })();
      </script>
    </div>

    <!-- Portfolio Loader Content - Oscilloscope -->
    <div id="loader-portfolio"
      style="display: none; flex-direction: column; align-items: center; justify-content: center; gap: 1.5rem; padding: 0 1rem;">
      <div style="width: clamp(20rem, 80vw, 40rem); height: clamp(13.33rem, 53.33vw, 26.67rem); position: relative;">
        <!-- Oscilloscope Device Illustration -->
        <svg viewBox="0 0 480 320" preserveAspectRatio="xMidYMid meet"
          style="width: 100%; height: 100%; display: block;">

          <defs>
            <pattern id="grid-pattern-portfolio" width="20" height="20" patternUnits="userSpaceOnUse">
              <path d="M 20 0 L 0 0 0 20" fill="none" stroke="#1A3A1A" stroke-width="0.5" opacity="0.3" />
            </pattern>
            <clipPath id="screen-clip-portfolio">
              <rect x="25" y="25" width="300" height="200" rx="4" />
            </clipPath>
            <radialGradient id="knob-gradient-portfolio">
              <stop offset="0%" stop-color="#4A4A4A" />
              <stop offset="50%" stop-color="#2A2A2A" />
              <stop offset="100%" stop-color="#1A1A1A" />
            </radialGradient>
          </defs>

          <rect x="0" y="0" width="480" height="320" rx="8" fill="#1A1A1A" stroke="#333" stroke-width="2" />
          <rect x="20" y="20" width="310" height="210" rx="6" fill="#0A0A0A" stroke="#444" stroke-width="2" />
          <rect x="25" y="25" width="300" height="200" rx="4" fill="#050505" />
          <rect x="25" y="25" width="300" height="200" fill="url(#grid-pattern-portfolio)"
            clip-path="url(#screen-clip-portfolio)" />

          <g clip-path="url(#screen-clip-portfolio)">
            <path class="scope-wave"
              d="M25,85 L37.5,85 L37.5,115 L50,115 L50,85 L62.5,85 L62.5,115 L75,115 L75,85 L87.5,85 L87.5,115 L100,115 L100,85 L112.5,85 L112.5,115 L125,115 L125,85 L137.5,85 L137.5,115 L150,115 L150,85 L162.5,85 L162.5,115 L175,115 L175,85 L187.5,85 L187.5,115 L200,115 L200,85 L212.5,85 L212.5,115 L225,115 L225,85 L237.5,85 L237.5,115 L250,115 L250,85 L262.5,85 L262.5,115 L275,115 L275,85 L287.5,85 L287.5,115 L300,115 L300,85 L312.5,85 L312.5,115 L325,115 L325,85 L337.5,85 L337.5,115 L350,115 L350,85 L362.5,85 L362.5,115 L375,115 L375,85 L387.5,85 L387.5,115 L400,115 L400,85 L412.5,85 L412.5,115 L425,115 L425,85 L437.5,85 L437.5,115 L450,115 L450,85 L462.5,85 L462.5,115 L475,115 L475,85 L487.5,85 L487.5,115 L500,115 L500,85 L512.5,85 L512.5,115 L525,115 L525,85 L537.5,85 L537.5,115 L550,115 L550,85 L562.5,85 L562.5,115 L575,115 L575,85 L587.5,85 L587.5,115 L600,115 L600,85 L612.5,85 L612.5,115 L625,115 L625,85"
              fill="none" stroke="#FFD700" stroke-width="2"
              style="filter: drop-shadow(0 0 6px rgba(255, 215, 0, 0.8));" />
          </g>

          <g clip-path="url(#screen-clip-portfolio)">
            <path class="scope-wave"
              d="M25,155 L40,155 L40,175 L70,175 L70,155 L100,155 L100,175 L115,175 L130,175 L130,155 L160,155 L175,155 L175,175 L190,175 L220,175 L220,155 L250,155 L265,155 L265,175 L295,175 L325,175 L325,155 L340,155 L340,175 L370,175 L370,155 L400,155 L400,175 L415,175 L430,175 L430,155 L460,155 L475,155 L475,175 L490,175 L520,175 L520,155 L550,155 L565,155 L565,175 L595,175 L625,175 L625,155"
              fill="none" stroke="#FFD700" stroke-width="2" opacity="0.85"
              style="filter: drop-shadow(0 0 6px rgba(255, 215, 0, 0.6));" />
          </g>

          <rect x="340" y="20" width="130" height="210" rx="4" fill="#151515" stroke="#333" stroke-width="1" />
          <circle cx="380" cy="80" r="18" fill="url(#knob-gradient-portfolio)" stroke="#555" stroke-width="1" />
          <line x1="380" y1="68" x2="380" y2="74" stroke="#FFD700" stroke-width="2" stroke-linecap="round" />
          <text x="380" y="113" font-family="Orbitron, monospace" font-size="7" fill="#888"
            text-anchor="middle">GAIN</text>
          <circle cx="430" cy="80" r="18" fill="url(#knob-gradient-portfolio)" stroke="#555" stroke-width="1" />
          <line x1="430" y1="68" x2="430" y2="74" stroke="#FFD700" stroke-width="2" stroke-linecap="round" />
          <text x="430" y="113" font-family="Orbitron, monospace" font-size="7" fill="#888"
            text-anchor="middle">TIME/DIV</text>
          <circle cx="380" cy="160" r="18" fill="url(#knob-gradient-portfolio)" stroke="#555" stroke-width="1" />
          <line x1="380" y1="148" x2="380" y2="154" stroke="#FFD700" stroke-width="2" stroke-linecap="round" />
          <text x="380" y="193" font-family="Orbitron, monospace" font-size="7" fill="#888"
            text-anchor="middle">V-POS</text>
          <circle cx="430" cy="160" r="18" fill="url(#knob-gradient-portfolio)" stroke="#555" stroke-width="1" />
          <line x1="430" y1="148" x2="430" y2="154" stroke="#FFD700" stroke-width="2" stroke-linecap="round" />
          <text x="430" y="193" font-family="Orbitron, monospace" font-size="7" fill="#888"
            text-anchor="middle">TRIGGER</text>
          <rect x="20" y="240" width="450" height="70" rx="4" fill="#0F0F0F" stroke="#333" stroke-width="1" />
          <circle cx="50" cy="275" r="12" fill="#1A1A1A" stroke="#555" stroke-width="1" />
          <circle cx="50" cy="275" r="4" fill="#FFD700" opacity="0.9" />
          <text x="50" y="298" font-family="Orbitron, monospace" font-size="7" fill="#888"
            text-anchor="middle">POWER</text>
          <circle cx="380" cy="275" r="10" fill="#222" stroke="#FFD700" stroke-width="2" />
          <text x="380" y="298" font-family="Orbitron, monospace" font-size="7" fill="#888"
            text-anchor="middle">CH1</text>
          <circle cx="430" cy="275" r="10" fill="#222" stroke="#FFD700" stroke-width="2" />
          <text x="430" y="298" font-family="Orbitron, monospace" font-size="7" fill="#888"
            text-anchor="middle">CH2</text>
        </svg>
      </div>

      <p
        style="color: #FFD700; font-size: 0.875rem; letter-spacing: 0.3em; font-family: 'Orbitron', monospace; font-weight: 700; text-transform: uppercase; margin: 0; animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;">
        ANALYZING SIGNALS...
      </p>
      <style>
        @keyframes pulse {

          0%,
          100% {
            opacity: 1;
          }

          50% {
            opacity: 0.5;
          }
        }
      </style>
    </div>

    <!-- Architecture Loader Content -->
    <div id="loader-architecture" style="display: none; flex-direction: column; align-items: center; gap: 1.5rem;">
      <div
        style="position: relative; width: 100%; max-width: 500px; height: 16rem; display: flex; align-items: center; justify-content: center;">
        <canvas id="architecture-canvas" style="width: 100%; height: 100%; display: block;">
        </canvas>
        <!-- Glow Effect Bloom -->
        <div
          style="position: absolute; inset: 0; background-color: #FFD700; opacity: 0.05; filter: blur(48px); border-radius: 9999px; pointer-events: none;">
        </div>
      </div>
      <p
        style="color: #FFD700; font-size: 0.875rem; letter-spacing: 0.3em; font-family: 'Orbitron', monospace; font-weight: 700; text-transform: uppercase; margin: 0; animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;">
        RENDERING GEOMETRY...
      </p>
    </div>

    <!-- Router Logic for Initial Loader -->
    <script>
      (function () {
        const homeLoader = document.getElementById('loader-home');
        const portfolioLoader = document.getElementById('loader-portfolio');
        const architectureLoader = document.getElementById('loader-architecture');
        const path = window.location.pathname;

        if (path.includes('/portfolio')) {
          portfolioLoader.style.display = 'flex';
          // Oscilloscope animation is handled by CSS in the SVG
        } else if (path.includes('/architecture')) {
          architectureLoader.style.display = 'flex';
          const canvas = document.getElementById('architecture-canvas');

          if (canvas.transferControlToOffscreen) {
            const offscreen = canvas.transferControlToOffscreen();
            const workerCode = `
                let ctx;
                let width, height;
                let totalLength = 0;
                let startTime = null;
                const cycleDuration = 8000; // 8s total: 3s draw + 1s pause + 4s erase

                // Skyline Points
                const points = [
                    {x:0,y:160}, {x:40,y:160}, {x:50,y:40}, {x:60,y:40}, {x:70,y:160},
                    {x:100,y:160}, {x:100,y:80}, {x:105,y:75}, {x:105,y:50}, {x:115,y:50}, {x:115,y:75}, {x:120,y:80}, {x:120,y:160},
                    {x:150,y:160}, {x:150,y:80}, {x:160,y:70}, {x:170,y:80}, {x:170,y:160},
                    {x:200,y:160}, {x:200,y:30}, {x:210,y:30}, {x:210,y:160},
                    {x:240,y:160}, {x:240,y:60}, {x:260,y:40}, {x:260,y:160},
                    {x:320,y:160}
                ];

                // Pre-calculate segment lengths
                const segments = [];
                
                function init() {
                    let accumulatedLen = 0;
                    for(let i=1; i<points.length; i++) {
                        const p1 = points[i-1];
                        const p2 = points[i];
                        const dx = p2.x - p1.x;
                        const dy = p2.y - p1.y;
                        const len = Math.sqrt(dx*dx + dy*dy);
                        segments.push({
                            p1, p2, len, startDist: accumulatedLen, endDist: accumulatedLen + len
                        });
                        accumulatedLen += len;
                    }
                    totalLength = accumulatedLen;
                }
                init();

                self.onmessage = function(e) {
                    const { type, payload } = e.data;
                    if (type === 'INIT') {
                        ctx = payload.canvas.getContext('2d');
                        resize(payload.width, payload.height);
                        requestAnimationFrame(loop);
                    } else if (type === 'RESIZE') {
                        resize(payload.width, payload.height);
                    }
                };

                function resize(w, h) {
                    width = w;
                    height = h;
                    if(ctx && ctx.canvas) {
                        ctx.canvas.width = w;
                        ctx.canvas.height = h;
                    }
                }

                function loop(timestamp) {
                    if (!startTime) startTime = timestamp;
                    const elapsed = (timestamp - startTime) % cycleDuration;
                    const progress = elapsed / cycleDuration;

                    let drawStart = 0;
                    let drawEnd = width;

                    if (progress < 0.375) {
                        // Drawing IN (0-37.5% = 3s)
                        drawStart = 0;
                        const t = progress / 0.375;
                        drawEnd = totalLength * t;
                    } else if (progress < 0.5) {
                        // PAUSE - hold full skyline (37.5-50% = 1s)
                        drawStart = 0;
                        drawEnd = totalLength;
                    } else {
                        // Erasing OUT (50-100% = 4s)
                        const t = (progress - 0.5) / 0.5;
                        drawStart = totalLength * t;
                        drawEnd = totalLength;
                    }

                    draw(drawStart, drawEnd);
                    requestAnimationFrame(loop);
                }

                function draw(startDist, endDist) {
                    // Clear
                    ctx.clearRect(0, 0, width, height);

                    const scale = Math.min(width / 320, height / 160) * 0.8;
                    const tx = (width - 320 * scale) / 2;
                    const ty = (height - 160 * scale) / 2;

                    ctx.save();
                    ctx.translate(tx, ty);
                    ctx.scale(scale, scale);

                    ctx.strokeStyle = '#FFD700';
                    ctx.lineWidth = 2;
                    ctx.lineCap = 'round';
                    ctx.lineJoin = 'round';
                    ctx.beginPath();
                    
                    let firstPointDrawn = false;

                    for (const seg of segments) {
                        if (seg.endDist < startDist || seg.startDist > endDist) continue;

                        const segDrawStart = Math.max(seg.startDist, startDist);
                        const segDrawEnd = Math.min(seg.endDist, endDist);

                        const t1 = (segDrawStart - seg.startDist) / seg.len;
                        const t2 = (segDrawEnd - seg.startDist) / seg.len;

                        const x1 = seg.p1.x + (seg.p2.x - seg.p1.x) * t1;
                        const y1 = seg.p1.y + (seg.p2.y - seg.p1.y) * t1;
                        const x2 = seg.p1.x + (seg.p2.x - seg.p1.x) * t2;
                        const y2 = seg.p1.y + (seg.p2.y - seg.p1.y) * t2;

                        if (!firstPointDrawn) {
                            ctx.moveTo(x1, y1);
                            firstPointDrawn = true;
                        } else {
                            // simple moveTo initial point then lineTo subsequent is likely fine 
                            ctx.moveTo(x1, y1);
                        }
                        ctx.lineTo(x2, y2);
                    }
                    ctx.stroke();
                    ctx.restore();
                }
            `;

            const blob = new Blob([workerCode], { type: 'application/javascript' });
            const worker = new Worker(URL.createObjectURL(blob));

            worker.postMessage({
              type: 'INIT',
              payload: {
                canvas: offscreen,
                width: 500,
                height: 250
              }
            }, [offscreen]);

            // Note: Canvas size management in static loader might differ from React
            // For now passing fixed layout size or window size? 
            // React component passes window.innerWidth, but canvas is restricted by CSS container.
            // Actually React component style: w-full h-full in a container.
            // Let's pass the container dimensions if possible, or window dimensions and let canvas scale?
            // The worker uses window dimensions in React one... let's stick to window for consistency
            // although the container in index.html is fixed size (20rem x 10rem originally, now 100% of container).

            // Let's use window resize event as well.
            window.addEventListener('resize', () => {
              worker.postMessage({
                type: 'RESIZE',
                payload: { width: 500, height: 250 }
              });
            });

            // Re-init with correct initial size?
            // Ideally we want the canvas internal buffer to match its display size.
            // But layout might not be ready. Let's use a safe default or window.
            // The React one uses window innerWidth/Height.

          } else {
            // Fallback for Safari/Legacy (Main Thread) - Omitted for brevity/time, SVG fallback was static? 
            // We just won't show animation or simple fallback.
          }

        } else {
          homeLoader.style.display = 'flex';
        }
      })();
    </script>
  </div>

  <div id="root"></div>
</body>

</html>